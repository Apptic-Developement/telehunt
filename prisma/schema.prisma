// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id    String @id @default(uuid())
  email String @unique
  name  String
  role Role
  posts Post[]
  votes Vote[]
}

model Vote {
  id      String @id @default(uuid())
  voter   User   @relation(fields: [voterId], references: [id])
  voterId String
  post    Post   @relation(fields: [postId], references: [id])
  postId  String
}

model Tag {
  id String @id @default(uuid())
  name String
  slug String
  posts Post[]
}
model Post {
  id               String   @id @default(uuid())
  name             String
  shortDescription String
  longDescription  String
  icon             String
  type             PostType
  author           User     @relation(fields: [authorId], references: [id])
  authorId         String
  Vote             Vote[]
  tags Tag[]
}

enum PostType {
  CHANNEL
  GROUP
  BOT
}

enum Role {
  USER
  ADMIN
}
